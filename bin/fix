#!/bin/sh

#
# quick release script base on name of the script

set -eu
cd "$(git rev-parse --show-toplevel)"

make tests
diff="$(git diff --name-status -r | awk '{print $2}' | tr '\n' ' ')"

git add -A
test -z "$(git status --porcelain)" || git commit --quiet -m "${0##*/}: $(date +%Y-%m-%d) ${diff}"
git push --quiet

main "$@"
