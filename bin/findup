#!/bin/sh


# Usage: find_up <filename> until root or <dir>
#
# Outputs the path of <filename> when searched from the current directory up to / or <dir>
#
# Example:
#    mkdir -p /tmp/foo/bar && cd /tmp/foo/bar && touch baz
#    mkdir -p project/foo && cd project/foo && find_up baz
#    # output: /tmp/foo/bar/baz
#    find_up baz /tmp/foo/bar/project
#    # output:

main() {
  (
    while true; do
      [ ! -f "$1" ] || { echo "${PWD}/$1"; break; }
      [ "${PWD}" != "${2:-/}" ] || break
      cd ..
    done
  )
}

main "$@"
